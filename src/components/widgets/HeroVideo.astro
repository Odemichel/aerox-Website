---
import posterPuissance from '../../assets/images/posterPuissance.jpg?url';

import type { HeroVideo as Props } from '~/types';

const {
  video,
  id,
  bg,
} = Astro.props as Props;
---
<section class="relative max-h-full md:-mt-[76px] not-prose" {...id ? { id } : {}}>
  <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
    <slot name="bg">
      {bg ? <Fragment set:html={bg} /> : null}
    </slot>
  </div>
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6">

    <div
      class="intersect-once intersect-no-queue intersect-quarter motion-safe:opacity-0 motion-safe:intersect:animate-fade"
    >
      {
        video ? (
          <figure class="relative m-auto mt-12 mb-24 md:max-w-3xl max-w-5xl items-center text-center">
            
            <!-- H2 SEO -->
            <h2 class="sr-only">
              Démonstration AeroX en vidéo : cyclisme indoor avec aérodynamisme en temps réel. Au-delà de Zwift, MyWhoosh et Kinomap, deviens plus rapide.
            </h2>

            <!-- Vidéo -->
            <video
              autoplay
              muted
              loop
              playsinline
              poster={posterPuissance ?? ''}
              class="mx-auto rounded-md w-full shadow-lg"
              title="Démonstration AeroX – cyclisme indoor avec aérodynamisme"
              aria-label="Vidéo AeroX : gagne 2–3 km/h et économise 40 W sur home trainer grâce à l’aérodynamisme en temps réel"
            >
              <source src={video.src} type="video/mp4" />
            </video>

            <!-- Légende SEO-friendly -->
            <figcaption class="italic text-muted">
              AeroX transforme ton home trainer en soufflerie : ta position traduite en gain de puissance en temps réel. 
            </figcaption>
          </figure>
        ) : null
      }
    </div>
  </div>
</section>
